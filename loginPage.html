<html>

<head>
    <title>Login</title>
   <script type="text/javascript">
        /** var uID;
                var uIDR = new XMLHttpRequest();
                uIDR.open('GET', '/loginPage/uIDRequest', false);
                uIDR.onload = function () {
                    uID = uIDR.responseText;
                };
                uIDR.send();
                document.cookie = "uID" + "=" + uID + "" + "; path=/";
                console.log(uID); **/
        function checkLoginSuccess() {
            console.log("TRIG");
            var loginSuccessR = new XMLHttpRequest();
            loginSuccessR.open('GET', '127.0.0.1:8080/loginPage/login', true);
            loginSuccessR.onload = function () {
                var loginSuccess = loginSuccessR.responseText;
                console.log(loginSuccess);
            }
            loginSuccessR.send();
        }
    </script> 
    <!-- <script type="text/javascript">
        function checkLoginSuccess() {
            var init = {
                method: 'GET',
                mode: 'cors',
            };

            fetch('127.0.0.1:8080/loginPage/login', init)
                .then(
                    function (response) {
                        console.log("Located");
                        return ;
                    })
                .then(
                    function (loginSuccess) {
                        console.log(response.text());
                        switch (loginSuccess) {
                            case "1":
                                console.log(loginSuccess);
                                var uID;
                                fetch('loginPage/uIDRequest').then(function (response) {
                                    response.text().then(function (uID) {
                                        console.log("COOKIES");
                                        document.cookie = "uID" + "=" + uID + "" + "; path=/";
                                        console.log(uID);
                                        window.location = "/setsPage";
                                    });
                                });
                                break;
                            case "0":
                                document.getElementById("successP").innerHTML = "Username incorrect";
                                console.log(loginSuccess);
                                break;
                            case "2":
                                document.getElementById("successP").innerHTML = "Password incorrect";
                                console.log(loginSuccess);
                                break;
                            default:
                                console.log("You know its fucked up");
                                console.log(loginSuccess);
                                break;
                        }


                    });
        };
    </script> !-->
    <script>
        window.onload = function () {
            var form = document.getElementById("a");
            form.addEventListener('submit', checkLoginSuccess, true);
        }
    </script>
</head>

<body style="background-color: white;">
    <div id="header">
        <a id="sets" href='/setsPage' style="padding:0px; border:0px;"><img src="images/sets.png" alt="sets"></a>
        <a id="terms" href='/termsPage' style=" position:absolute; left:5%; border: 0px;"><img src="images/terms.png" alt="terms"></a>
        <a id="login" href='/loginPage' style="position:absolute; left:90%; padding: 0%; border: 0%;"><img src="images/login.png" alt="login"></a>
        <a id="signup" href='/signUpPage' style="position:absolute; left:80%; padding:0px; border:0px;"><img src="images/signup.png" alt="signup"></a>
    </div>
    <h2>Login</h2>
    <form id="a" method="POST" action="loginPage">
        <input type="text" name="userName" placeholder="userName">
        <input type="password" name="pw" placeholder="pw">
        <input type="image" src="images/login.png" alt="login" />
    </form>
    <p id="infoP"></p>
</body>

</html>