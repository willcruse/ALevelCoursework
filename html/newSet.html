<html>

<head>
    <title>New Set</title>
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <script type="text/javascript"> 
        function newSets() {
            var uID = -1;
            var x = decodeURIComponent(document.cookie);
            var split = x.split(";")
            var target = "uID=";
            for (var i = 0; i < split.length; i++) {
                var c = split[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
            }
            if (c.indexOf(target) == 0) {
                uID = c.substring(target.length, c.length);
            }
            if (uID == -1) {
                document.getElementById("infoP").innerHTML = "Not logged in";
                return;
            }
            var setName = document.getElementById("setName").value;
            var termA = document.getElementById("termA").value;
            var termB = document.getElementById("termB").value;
            var obj = new Object();
            obj.SetName = setName;
            obj.TermA = termA;
            obj.TermB = termB;
            obj.UID = uID;
            var jsonObj = JSON.stringify(obj)
            console.log("JSON ", jsonObj);
            var xhr = new XMLHttpRequest()
            xhr.open('POST', '/setsPage/newSets', true);
            xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
            xhr.onload = function () {
                var jsonResp = JSON.parse(xhr.responseText);
                console.log("JSON", jsonResp);
                switch (jsonResp.success) {
                    case 0:
                        document.getElementById("infoP").innerHTML = "Written Successfully";
                        break;
                    case 1:
                        document.getElementById("infoP").innerHTML = "Unsuccessful";
                        break
                    default:
                        document.getElementById("infoP").innerHTML = "Something has gone wrong....very wrong";
                        break;
                }
            }
            xhr.send(jsonObj)
        }
    </script>
</head>

<body>
        <div id="newSet">
            <form id="setsForm" method="POST" action="javascript:newSets();">
                <input id="setName" type="text" name="setName" placeholder="setName">
                <input id="termA" type="text" name="termA" placeholder="termA">
                <input id="termB" type="text" name="termB" placeholder="termB">
                <input type="submit" value="SetsPage">
            </form>
        </div>

        <p id="infoP"></p>
</body>

</html>